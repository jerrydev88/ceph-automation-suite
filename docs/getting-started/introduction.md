# 프로젝트 소개

## cephadm-ansible이란?

**cephadm-ansible**은 Ceph의 공식 관리 도구인 cephadm을 보완하는 Ansible 플레이북 모음입니다. cephadm이 기본적으로 제공하지 않는 워크플로우를 자동화하여 Ceph 클러스터 관리를 더욱 효율적으로 만들어줍니다.

## 주요 목적

### 1. 호스트 준비 자동화 (Preflight)
- 클러스터 부트스트래핑 전 모든 호스트의 초기 설정
- 필수 패키지 설치 (podman/docker, lvm2, chronyd, cephadm)
- Ceph 저장소 구성
- 시간 동기화 설정

### 2. 클라이언트 관리 간소화
- 클라이언트 호스트에 키링 자동 배포
- Ceph 설정 파일 배포
- 클라이언트 패키지 설치 자동화

### 3. 스토리지 서비스 구성 자동화
- CephFS 파일시스템 생성 및 관리
- RADOS Gateway (RGW) 서비스 구성
- RBD 블록 스토리지 설정
- S3 사용자 및 버킷 자동 생성

### 4. Kubernetes 통합
- CSI 드라이버를 위한 사용자 생성
- 적절한 권한 설정
- 키링 정보 관리

### 5. 클러스터 라이프사이클 관리
- 안전한 클러스터 제거
- 서비스별 롤백 기능
- 스냅샷 관리

## 왜 cephadm-ansible인가?

### cephadm만으로는 부족한 이유

cephadm은 강력한 Ceph 클러스터 관리 도구이지만, 다음과 같은 제한사항이 있습니다:

- **사전 준비 작업**: 호스트 준비 과정이 수동으로 이루어져야 함
- **클라이언트 관리**: 클라이언트 호스트 설정이 자동화되지 않음
- **복잡한 구성**: RGW 사용자, S3 버킷 등의 일괄 생성이 어려움
- **Kubernetes 통합**: CSI 사용자 관리가 수동으로 이루어져야 함

### cephadm-ansible의 장점

1. **완전한 자동화**: 한 번의 플레이북 실행으로 복잡한 작업 완료
2. **일관성 보장**: 모든 호스트에 동일한 설정 적용
3. **재사용성**: 변수 파일을 통한 쉬운 환경 전환
4. **안전성**: 롤백 플레이북 제공 및 사용자 확인 절차
5. **확장성**: 커스텀 플레이북 추가 가능

## 핵심 기능

### 📦 자동화된 설치 및 구성
- 다중 배포판 지원 (RHEL, CentOS, Ubuntu)
- 유연한 저장소 구성 (커뮤니티, RHCS, 커스텀, 개발)
- 플랫폼별 최적화된 설정

### 🔧 체계적인 플레이북 구조
- 번호 체계로 실행 순서 명확화 (00-99)
- 모듈화된 작업 단위
- 중앙 설정 파일 (`ceph-vars.yml`)

### 🛡️ 안전한 운영
- 삭제 작업 시 사용자 확인
- 트랜잭션 방식의 작업 처리
- 상세한 로깅 및 결과 파일 생성

### 🔄 완벽한 라이프사이클 관리
- 설정 → 운영 → 롤백의 전체 과정 지원
- 서비스별 독립적인 관리
- 점진적 업데이트 지원

## 프로젝트 구조

```
cephadm-ansible/
├── 플레이북 (Playbooks)
│   ├── 핵심 플레이북 (Core)
│   │   ├── cephadm-preflight.yml
│   │   ├── cephadm-clients.yml
│   │   └── cephadm-purge-cluster.yml
│   │
│   └── 커스텀 플레이북 (Custom)
│       ├── 00-09: 전역 구성
│       ├── 10-19: 클라이언트 통합
│       ├── 30-39: 사용자 관리
│       ├── 40-49: 운영 작업
│       └── 90-99: 롤백 작업
│
├── 구성 (Configuration)
│   ├── ceph-vars.yml     # 중앙 설정
│   ├── hosts.yaml        # 인벤토리
│   └── secret.yml        # 민감한 데이터
│
└── 역할 (Roles)
    └── ceph_defaults/    # 기본값 정의
```

## 사용 사례

### 1. 신규 Ceph 클러스터 구축
- 베어메탈 또는 VM에 Ceph 클러스터 신속 배포
- 모든 호스트의 일관된 초기 설정
- 스토리지 서비스 자동 구성

### 2. 클라이언트 확장
- 신규 클라이언트 호스트 추가
- 기존 클라이언트 재구성
- 권한 및 키링 관리

### 3. Kubernetes 스토리지 백엔드
- CSI 드라이버 통합
- 동적 프로비저닝 설정
- PV/PVC 관리

### 4. S3 호환 오브젝트 스토리지
- RGW 서비스 배포
- 멀티테넌트 환경 구성
- 버킷 정책 관리

### 5. 개발/테스트 환경
- 빠른 환경 구축 및 제거
- 설정 테스트 및 검증
- CI/CD 파이프라인 통합

## 다음 단계

- [빠른 시작 가이드](./quick-start.md)로 첫 클러스터 구축하기
- [기본 개념](./concepts.md)에서 핵심 용어 이해하기
- [아키텍처 개요](./architecture.md)에서 시스템 구조 파악하기

---

*이 문서는 cephadm-ansible 프로젝트의 기본 소개입니다. 더 자세한 정보는 각 섹션의 문서를 참조하세요.*